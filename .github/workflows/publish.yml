name: Publish

on: workflow_call

jobs:
  hello:
    name: "Hello"

    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Setup SSH
      uses: "./.github/actions/ssh"
      with:
        known-hosts: ${{secrets.KNOWN_HOSTS}}
        ssh-key: ${{secrets.SSH_KEY}}
        host: ${{secrets.SSH_HOST}}
        user: ${{secrets.SSH_USERNAME}}

    - name: Cmd
      run: |
        ssh ${{ secrets.SSH_HOST }} cat test
      shell: bash

    - name: Cleanup
      run: |
        echo "Cleaning up"
        rm -f ~/.ssh/{config,key,known_hosts} || true        
      shell: bash
